<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <script src="https://vk.com/js/api/openapi.js" type="text/javascript"></script>
    <script type="text/javascript">

        VK.init({
            apiId: '5043774'
        });

        // VK.Auth.login(loginSuccess);

        function preparePostIds(postsListData) {
            return postsListData.response.items.map(function (post) {
                return post.owner_id + '_' + post.id
            }).slice(0, 100).join(',');
        }

        function loginSuccess() {
            call('wall.get', function (postsListData) {
                call('wall.getById', {
                    posts: preparePostIds(postsListData)
                }, function (postsContents) {
                    postsContents.response.forEach(function (item) {
                        log(item)
                    })
                })
            })
        }

        function call(method, paramsOrCallback, callback) {
            var params = callback ? paramsOrCallback : {};
            params.v = '5.74';
            callback = callback || paramsOrCallback;
            VK.Api.call(method, params, callback)
        }

        function log(a) {
            console.log(a);
        }
    </script>

    <script src="https://unpkg.com/browserfs"></script>
    <script src="https://unpkg.com/isomorphic-git"></script>
    <script>

        var fsConfig = {
            fs: "IndexedDB",
            options: {}
        };

        initFS(gitListFiles);

        function gitListFiles(fs) {
            git.clone({
                fs: fs,
                dir: '/',
                url: 'https://cors-buster-jfpactjnem.now.sh/github.com/art-therapy/art-therapy.github.io.git',
                singleBranch: true,
                depth: 1
            }).then(function () {
                log('clone success');
                fs.readFile('/pages.txt', function(err, contents) {
                    console.log(contents.toString());
                });
            });
        }

        function initFS(fsLoadCallback) {
            BrowserFS.configure(fsConfig, function (err) {
                if (err)
                    return console.error(err);
                fsLoadCallback(BrowserFS.BFSRequire("fs"));
            });
        }
    </script>
</body>
</html>